# Roguelike

## Команда

- Илья Иванцов
- Доморацкий Эридан

## Архитектурная документация

### Служебная информация

**Название:** Roguelike

**Авторы:** Доморацкий Эридан, Иванцов Илья

**Дата:** 08.06.2023

### Общие сведения о системе

#### Назначение системы

Система является однопользовательской пошаговой игрой в жанре roguelike с видом сверху,
доступной для использования с помощью Web-браузера. Пользовательский интерфейс предоставляется
в графическом виде с управлением при помощи клавиатуры и без использования мыши.

#### Описание границ системы

- Система является игрой
- Жанр игры roguelike
- Система однопользовательская (никакие два пользователя не могут коммуницировать
  посредством использования системы)
- Система предоставляет графический пользовательский интерфейс с тайловой графикой
- Управление игровым процессом происходит исключительно с помощью клавиатуры
- Внутриигровой мир двумерный
- Игра является пошаговой, все игровые механики срабатывают исключительно во время хода игрока
- Внутриигровые механики не используют технологии искуственного интеллекта, все действия
  определяются детерминировано или с использованием генератора псевдо-случайных чисел
- Все игровые объекты привязаны к целочисленной координатной сетке, как местоположение,
  так и размеры
- Система не использует звуковое сопровождение, никакие звуки не проигрываются на компьютере в
  связи с использованием системы

#### Описание контекста

- Система работает в рамках одной web-страницы
- Система не использует никакие устройства ввода, кроме клавиатуры

### Ключевые требования (architectural drivers)

#### Технические ограничения

- Система должна быть доступна для использования посредством Web-браузера
- Для использования системы не требуется никакое прикладное ПО, кроме Web-браузера
- Система не должна использовать никакие устройства ввода, кроме клавиатуры
- Система не должна воспроизводить звуки

#### Бизнес-ограничения

- Разработка системы должна быть завершена к моменту сдачи экзамена (12.06.2023)

#### Ключевые функциональные требования

- Система является игрой в жанре roguelike
- Игра является пошаговой, все игровые механики срабатывают исключительно во время хода игрока

### Роли и случаи использования

Для пользователей системы предусмотрена единственная роль Игрок.

В начале работы с системой Игрок выбирает тип генарации игрового мира: случайный или
загруженный из файла. После выбора система генерирует мир в соответствии с выбранным вариантом и
предоставляет доступ к управлению персонажем в игровом мире.

В игровом мире Игрок может управлять:
- перемещением персонажа (ходить вверх, вниз, вправо или влево),
- подбирать предметы, расположенные в игровом мире,
- использовать предметы, находящиеся в инвентаре,
- выбрасывать предметы из инвентаря в игровой мир,
- экипировать предметы из инвентаря.

Также Игрок должен иметь возможность получить информацию о текущем содержимом инвентаря,
экипированных предметах, текущих характеристиках (здоровье, сила атаки, броня) и видеть игровой
мир, окружающий персонажа.

### Контекст

Система является однопользовательской игрой в жанре roguelike с двумерной тайловой графикой,
управляемой с клавиатуры. Игровой мир также является двумерным, игрок видит мир сверху.
Игра является пошаговой, поэтому все внутриигровые механики действуют только в момент хода игрока.
В игровом мире должны присутствовать предметы, которые игрок может подобрать, после чего они
появляются в его инвентаре. Любой предмет в инвентаре может быть выброшен в игровой мир, либо
использован. Действие, сопровождающее использование предмета, зависит от типа предмета.
В игре должны присутствовать предметы, которые персонаж может надеть на себя в качестве экипировки,
при этом надетые предметы должны влиять на характеристики персонажа. Персонаж должен обладать
такими характеристиками, как здоровье, сила урона и защита. Персонаж может свободно перемещаться
по игровому миру, за исключением позиций, в которых стоит непреодолимое препятствие (например,
стена). Игровой мир представляется как условно-бесконечная (не ограниченная ничем, кроме
технических ограничений среды исполнения) целочисленная координатная сетка, поэтому все игровые
объекты, в том числе персонаж, могут находиться только на целочисленных позициях и иметь
целочисленный размер, выражающийся в количестве клеток коорднатной плоскости. Игрок должен иметь
возможность узнать текущие характеристики персонажа.

### Композиция

На верхнем уровне абстракции систему можно рассматривать как два компонента: шина событий и
игровая логика.

**Шина событий (event bus)** предназначена для обмена общесистемными событиями, такими как события
web-браузера. Также сюда входят текущее состояние и обработчики событий. Обработчики событий
выполняют роль контроллеров (аналогия из MVC), полностью отделяя игровую логику от особенностей
среды исполнения. Текущее состояние используется обработчиками событий для хранения общего
(распределённого между обработчиками) состояния, например, текущего игрового мира.

**Игровая логика** включает в себя непосредственно всю игровую логику и также логику отображения
игровых объектов на экране. Точкой входа в игру является игровой мир, который содержит в себе всю
игровую информацию, а внутри него расположены более простые игровые объекты.

![Диаграмма компонентов](./uml/components.drawio.png)

### Логическая структура

### Использование шаблонов

... паттерн цепочка обязанностей для event bus, паттерн состояние для текущего стейта,
паттерн композиция для drawable ...

### Интерфейсы

... программные интерфейсы типа game object и drawable ...

... наброски пользовательского интерфейса ...

### Взаимодействия

... передача событий от браузера к обработчикам, взаимодействие игрового мира с объектами
и наоборот ...

### Динамика состояний

... переход от главного экрана к игре и наоборот ...

### Ресурсы

... шрифты из Google Fonts ...
