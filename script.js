(()=>{var t={1424:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(8081),o=n.n(r),i=n(3645),a=n.n(i)()(o());a.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Roboto&display=swap);"]),a.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Noto+Colr+Emoji+Glyf);"]),a.push([t.id,"\n/* noinspection CssUnknownTarget */\n\n/* noinspection CssUnknownTarget */\n\nhtml, body {\n    width: 100vw;\n    height: 100vh;\n    padding: 0;\n    margin: 0;\n    overflow: hidden;\n    background: #111;\n}\n\ncanvas {\n    outline: none;\n}\n",""]);const u=a},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var u=0;u<this.length;u++){var c=this[u][0];null!=c&&(a[c]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},8081:t=>{"use strict";t.exports=function(t){return t[1]}},6377:(t,e,n)=>{var r=n(4832),o=n(8652),i=n(801),a=n(2030),u=n(3618),c=n(9049),s=n(1971);s.alea=r,s.xor128=o,s.xorwow=i,s.xorshift7=a,s.xor4096=u,s.tychei=c,t.exports=s},4832:function(t,e,n){var r;!function(t,o,i){function a(t){var e,n=this,r=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function u(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function c(t,e){var n=new a(t),r=e&&e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&u(r,n),o.state=function(){return u(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.alea=c}(0,t=n.nmd(t),n.amdD)},9049:function(t,e,n){var r;!function(t,o,i){function a(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function u(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function c(t,e){var n=new a(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&u(r,n),o.state=function(){return u(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.tychei=c}(0,t=n.nmd(t),n.amdD)},8652:function(t,e,n){var r;!function(t,o,i){function a(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function u(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function c(t,e){var n=new a(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&u(r,n),o.state=function(){return u(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xor128=c}(0,t=n.nmd(t),n.amdD)},3618:function(t,e,n){var r;!function(t,o,i){function a(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,i=e.i;return e.w=r=r+1640531527|0,n=o[i+34&127],t=o[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[i]=n^t,e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,o,i,a,u=[],c=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,c=Math.max(c,e.length)),o=0,i=-32;i<c;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=u[127&i]^=r+a)?o+1:0);for(o>=128&&(u[127&(e&&e.length||0)]=-1),o=127,i=512;i>0;--i)r=u[o+34&127],n=u[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[o]=r^n;t.w=a,t.X=u,t.i=o}(e,t)}function u(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function c(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.X&&u(r,n),o.state=function(){return u(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xor4096=c}(0,t=n.nmd(t),n.amdD)},2030:function(t,e,n){var r;!function(t,o,i){function a(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function u(t,e){return e.x=t.x.slice(),e.i=t.i,e}function c(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.x&&u(r,n),o.state=function(){return u(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xorshift7=c}(0,t=n.nmd(t),n.amdD)},801:function(t,e,n){var r;!function(t,o,i){function a(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function u(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function c(t,e){var n=new a(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&u(r,n),o.state=function(){return u(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xorwow=c}(0,t=n.nmd(t),n.amdD)},1971:function(t,e,n){var r;!function(o,i,a){var u,c=256,s=a.pow(c,6),l=a.pow(2,52),f=2*l,d=c-1;function h(t,e,n){var r=[],d=m(y((e=1==e?{entropy:!0}:e||{}).entropy?[t,x(i)]:null==t?function(){try{var t;return u&&(t=u.randomBytes)?t=t(c):(t=new Uint8Array(c),(o.crypto||o.msCrypto).getRandomValues(t)),x(t)}catch(t){var e=o.navigator,n=e&&e.plugins;return[+new Date,o,n,o.screen,x(i)]}}():t,3),r),h=new p(r),w=function(){for(var t=h.g(6),e=s,n=0;t<l;)t=(t+n)*c,e*=c,n=h.g(1);for(;t>=f;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|h.g(4)},w.quick=function(){return h.g(4)/4294967296},w.double=w,m(x(h.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&v(r,h),t.state=function(){return v(h,{})}),n?(a.random=t,e):t})(w,d,"global"in e?e.global:this==a,e.state)}function p(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);o<c;)a[o]=o++;for(o=0;o<c;o++)a[o]=a[i=d&i+t[o%n]+(e=a[o])],a[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,a=r.S;t--;)e=a[o=d&o+1],n=n*c+a[d&(a[o]=a[i=d&i+e])+(a[i]=e)];return r.i=o,r.j=i,n})(c)}function v(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function y(t,e){var n,r=[],o=typeof t;if(e&&"object"==o)for(n in t)try{r.push(y(t[n],e-1))}catch(t){}return r.length?r:"string"==o?t:t+"\0"}function m(t,e){for(var n,r=t+"",o=0;o<r.length;)e[d&o]=d&(n^=19*e[d&o])+r.charCodeAt(o++);return x(e)}function x(t){return String.fromCharCode.apply(0,t)}if(m(a.random(),i),t.exports){t.exports=h;try{u=n(5042)}catch(t){}}else void 0===(r=function(){return h}.call(e,n,e,t))||(t.exports=r)}("undefined"!=typeof self?self:this,[],Math)},8548:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(3379),o=n.n(r),i=n(7795),a=n.n(i),u=n(569),c=n.n(u),s=n(3565),l=n.n(s),f=n(9216),d=n.n(f),h=n(4589),p=n.n(h),v=n(1424),y={};y.styleTagTransform=p(),y.setAttributes=l(),y.insert=c().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=d(),o()(v.Z,y);const m=v.Z&&v.Z.locals?v.Z.locals:void 0},3379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],u=0;u<t.length;u++){var c=t[u],s=r.base?c[0]+r.base:c[0],l=i[s]||0,f="".concat(s," ").concat(l);i[s]=l+1;var d=n(f),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(h);else{var p=o(h,r);r.byIndex=u,e.splice(u,0,{identifier:f,updater:p,references:1})}a.push(f)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var u=n(i[a]);e[u].references--}for(var c=r(t,o),s=0;s<i.length;s++){var l=n(i[s]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},1811:function(t,e){"use strict";var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.EventBus=void 0,e.EventBus=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return function(r){var o,i;try{for(var a=n(e),u=a.next();!u.done;u=a.next()){var c=(0,u.value)(t,r);void 0!==c&&(t=c)}}catch(t){o={error:t}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}}},118:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasClearEventHandler=void 0,e.CanvasClearEventHandler=function(t,e){var n=t.canvas,r=t.context;"tick"===e.type&&r.clearRect(0,0,n.width,n.height)}},4345:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChangePreviousUpdateTimeEventHandler=void 0,e.ChangePreviousUpdateTimeEventHandler=function(t,e){"tick"===e.type&&(t.previousUpdateTime=performance.now())}},6301:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DebugInfoEventHandler=void 0;var r=n(3380);e.DebugInfoEventHandler=function(){var t=!1,e=void 0;return function(n,o){if("game"===n.state&&("keyDown"===o.type&&(e=o.event.code,"F3"===o.event.code&&(t=!t,o.event.preventDefault())),"tick"===o.type&&t)){var i=n.context;i.save(),i.fillStyle="rgba(0, 0, 0, 0.3)",i.fillRect(0,0,.3*n.canvas.width,.4*n.canvas.height),i.beginPath(),i.rect(5,5,.3*n.canvas.width-10,.4*n.canvas.height-10),i.clip(),i.fillStyle="white";var a=performance.now()-n.previousUpdateTime;(0,r.drawText)(i,""+"Time delta: ".concat(Math.round(a),"\n")+"Ticks per second: ".concat(Math.round(1e3/a),"\n")+"Player position: ".concat(n.world.player.coordinates,"\n")+"Camera offset: ".concat(n.cameraOffset,"\n")+"Pressed key: ".concat(e,"\n"),5,5),i.restore()}}}},2417:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.GameInterfaceEventHandler=void 0;var o=n(6947),i=n(1184),a=n(3380),u=n(909),c=64,s=16,l="".concat(16,"px ").concat(a.EMOJI_FONT_FAMILY);e.GameInterfaceEventHandler=function(){var t=0;return function(e,n){if("game"===e.state){var r=e.canvas,i=e.context,f=e.world,p=e.previousUpdateTime;if("keyDown"!==n.type)"tick"===n.type&&(function(e,n){var r=e.health/e.maxHealth;if(r!==t){var o=.01*(r-t),i=performance.now()-n,a=t+o*i,u=Math.abs(a-r);u>1||(t=u<.01?r:a)}}(f.player,p),f.player.inventory.draw(i,new u.Coordinates(r.width/2,r.height-32-16),new u.Coordinates(c,c)),h(t,r,i),d(f.player,r,i),i.save(),i.fillStyle="#eee",i.font=l,(0,a.drawText)(i,"❤ ".concat(f.player.health," / ").concat(f.player.maxHealth,"  |  ")+"👊 ".concat(f.player.actualDamage(),"  |  ")+"🛡️ ".concat(f.player.actualArmor()),r.width/2,r.height-c-48-s-16,{centerWidth:!0}),i.restore());else{if("Enter"===n.event.code)return void f.player.inventory.useSelectedItem(f);if("Backspace"===n.event.code)return void f.player.inventory.dropSelectedItem(f);if("Escape"===n.event.code)return{state:"mainMenu",canvas:r,context:i,previousUpdateTime:p};var v=f.player.inventory.selectedItem,y=v;switch(n.event.code){case"Digit1":y=0;break;case"Digit2":y=1;break;case"Digit3":y=2;break;case"Digit4":y=3;break;case"Digit5":y=4;break;case"Digit6":y=5;break;case"Digit7":y=6;break;case"Digit8":y=7;break;case"Digit9":y=8;break;case"ArrowLeft":y=(o.INVENTORY_SIZE+v-1)%o.INVENTORY_SIZE;break;case"ArrowRight":y=(v+1)%o.INVENTORY_SIZE}f.player.inventory.selectedItem=y}}}};var f=function(t){switch(t){case i.EquipmentType.SWORD:return"👊";case i.EquipmentType.ARMOR:return"🛡️";default:return""}},d=function(t,e,n){var i,s,d=t.equipment.filter((function(t){return void 0!==t})),h=c*o.ITEM_SCALE_FACTOR,p=new u.Coordinates(h,h),v=16+h/2,y=e.height;try{for(var m=r(d),x=m.next();!x.done;x=m.next()){var w=x.value;y-=h/2+16,w.draw(n,new u.Coordinates(v,y),p),n.save(),0===w.equipmentBonus?n.fillStyle="#eee":w.equipmentBonus>0?n.fillStyle="#0bce00":n.fillStyle="#d00000",n.font=l,(0,a.drawText)(n,(w.equipmentBonus<0?"":"+")+w.equipmentBonus+" "+f(w.equipmentType),v+h/2+16,y,{centerHeight:!0}),n.restore()}}catch(t){i={error:t}}finally{try{x&&!x.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}},h=function(t,e,n){n.save(),n.fillStyle="#ccc",n.fillRect(e.width/2-c*o.INVENTORY_SIZE/2,e.height-c-32-s,c*o.INVENTORY_SIZE,s),n.fillStyle="#e74236",n.fillRect(e.width/2-c*o.INVENTORY_SIZE/2,e.height-c-32-s,c*o.INVENTORY_SIZE*t,s);var r=n.createLinearGradient(0,e.height-c-32-s,0,e.height-c-32);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(1,"rgba(0, 0, 0, 0.6)"),n.fillStyle=r,n.fillRect(e.width/2-c*o.INVENTORY_SIZE/2,e.height-c-32-s,c*o.INVENTORY_SIZE,s),n.strokeStyle="#000",n.lineWidth=3,n.strokeRect(e.width/2-c*o.INVENTORY_SIZE/2,e.height-c-32-s,c*o.INVENTORY_SIZE,s),n.restore()}},4993:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.GameWorldEventHandler=void 0;var o=n(2267),i=n(909),a=r(n(7785));(0,o.loadTexture)(a.default),e.GameWorldEventHandler=function(t,e){if("game"===t.state){if("keyDown"===e.type)switch(e.event.code){case"KeyW":t.world.movePlayer(new i.Coordinates(0,-1))&&(t.cameraOffset.y-=t.scale.y);break;case"KeyA":t.world.movePlayer(new i.Coordinates(-1,0))&&(t.cameraOffset.x-=t.scale.x);break;case"KeyS":t.world.movePlayer(new i.Coordinates(0,1))&&(t.cameraOffset.y+=t.scale.y);break;case"KeyD":t.world.movePlayer(new i.Coordinates(1,0))&&(t.cameraOffset.x+=t.scale.x)}if("tick"===e.type){u(t);var n=new i.Coordinates(~~(t.canvas.width/2+t.cameraOffset.x),~~(t.canvas.height/2+t.cameraOffset.y));c(t.context,new i.Coordinates(t.canvas.width,t.canvas.height),n,t.scale),t.world.draw(t.context,n,t.scale),s(t)}}};var u=function(t){var e=t.cameraOffset,n=t.previousUpdateTime,r=e.length()/4;if(!isFinite(r)||r<.5)return e.x=0,void(e.y=0);var o=performance.now()-n,i=Math.max(r,25),a=e.norm();Math.abs(e.x)<1?e.x=0:e.x-=a.x*i/o,Math.abs(e.y)<1?e.y=0:e.y-=a.y*i/o},c=function(t,e,n,r){for(var u=e.x,c=e.y,s=2+~~(u/r.x),l=2+~~(c/r.y),f=(r.x-n.x%r.x)%r.x,d=(r.y-n.y%r.y)%r.y,h=0;h<=s;++h)for(var p=0;p<=l;++p)(0,o.drawTexture)(a.default,t,new i.Coordinates(-f+h*r.x,-d+p*r.y),r)},s=function(t){var e=t.canvas,n=t.context,r=t.darknessRadius,o=n.createRadialGradient(e.width/2,e.height/2,r,e.width/2,e.height/2,Math.max(e.width,e.height)/2);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 0.9)"),n.fillStyle=o,n.fillRect(0,0,e.width,e.height)}},4569:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InitEventHandler=void 0,e.InitEventHandler=function(t,e){var n=t.canvas;if("load"===e.type||"resize"==e.type){var r=document.body.getBoundingClientRect();n.width=r.width,n.height=r.height}}},1716:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MainMenuEventHandler=void 0;var u=n(7969),c=n(909),s=n(5989),l=n(9133),f=n(9122),d=n(398),h=n(4808),p=n(8083),v=n(1685),y=n(422),m=n(7945),x=n(3380),w=a(n(6315));e.MainMenuEventHandler=function(t,e){if("mainMenu"===t.state){if("keyDown"===e.type){var n=void 0;switch(e.event.code){case"Digit1":n=1;break;case"Digit2":n=2;break;case"Digit3":n=3;break;default:return}var o=r(r({},t),{state:"game",world:new u.GameWorld,darknessRadius:130,scale:new c.Coordinates(100,100),cameraOffset:new c.Coordinates(0,0)});return 1===n?o.world=b():2===n?g().then((function(t){o.world=t})):_().then((function(t){o.world=t})),o}if("tick"===e.type){var i=t.canvas,a=t.context;a.save(),a.font="20px ".concat(x.DEFAULT_FONT_FAMILY),a.fillStyle="#eee",(0,x.drawText)(a,"Press button to start:\n\n1. Load stub world\n2. Load random world\n3. Load world from file",i.width/2,i.height/2,{centerWidth:!0,centerHeight:!0}),a.restore()}}};var b=function(){var t=new u.GameWorld,e=new s.Wall;return e.coordinates=new c.Coordinates(-4,-3),e.matrix=[[!0,!0,!0,!0,!0,!0,!0,!0],[!0,!1,!1,!1,!1,!1,!1,!0],[!0,!1,!1,!0,!1,!1,!1,!0],[!0,!1,!1,!0,!1,!1,!1,!0],[!0,!1,!1,!0,!1,!1,!1,!0],[!0,!1,!0,!0,!0,!1,!1,!0],[!0,!1,!1,!1,!1,!1,!1,!0],[!0,!0,!0,!0,!0,!0,!0,!0]],t.objects.unshift(new l.DroppedItem(new f.Sword,new c.Coordinates(1,1))),t.objects.unshift(new l.DroppedItem(new d.GoldenApple,new c.Coordinates(2,3))),t.objects.push(e),t.player.health=4.23,t},g=function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){return[2,new h.BoxedWorldGenerator(5,2,new c.Coordinates(6,5),new v.UniformItemGenerator([[(0,p.constGenerator)((function(){return new f.Sword})),1],[(0,p.constGenerator)((function(){return new d.GoldenApple})),1]])).generate((0,y.seededRandom)(""+performance.now()))]}))}))},_=function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,m.FileWorldGenerator.loadFile(w.default)];case 1:return[2,t.sent().generate()]}}))}))}},9133:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DroppedItem=void 0;var r=n(909),o=.5,i=function(){function t(t,e){this.isPassable=!0,this.coordinates=e,this.item=t}return t.prototype.onStep=function(t){t.player.inventory.pickItem(this.item)&&t.removeObject(this)},t.prototype.collides=function(t){return this.coordinates.equals(t)},t.prototype.draw=function(t,e,n){t.save(),t.fillStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.ellipse(e.x,e.y+n.y*o/2,n.x*o/2,n.y*o/4,0,0,2*Math.PI),t.closePath(),t.fill(),t.restore(),this.item.draw(t,e,new r.Coordinates(n.x*o,n.y*o))},t}();e.DroppedItem=i},7969:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.GameWorld=void 0;var o=n(909),i=n(4463),a=n(5588),u=function(){function t(){this.objects=[],this.player=new i.Player,this.objects.push(this.player)}return t.prototype.placeObject=function(t){var e=this.objects.indexOf(this.player);-1!==e?this.objects.splice(e,0,t):console.error("Player is not in objects list")},t.prototype.removeObject=function(t){var e=this.objects.indexOf(t);return-1!==e&&(this.objects.splice(e,1),!0)},t.prototype.movePlayer=function(t){var e,n,i=new o.Coordinates(this.player.coordinates.x+t.x,this.player.coordinates.y+t.y);if(this.checkCollisionWithObjects(i).length>0)return!1;this.player.coordinates=i;var u=this.checkCollisionWithObjects(i,!1);try{for(var c=r(u),s=c.next();!s.done;s=c.next()){var l=s.value;(0,a.isTrigger)(l)&&l.onStep(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return!0},t.prototype.draw=function(t,e,n){var i,a;try{for(var u=r(this.objects),c=u.next();!c.done;c=u.next()){var s=c.value,l=new o.Coordinates(s.coordinates.x-this.player.coordinates.x,s.coordinates.y-this.player.coordinates.y);s.draw(t,new o.Coordinates(e.x+l.x*n.x,e.y+l.y*n.y),n)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}},t.prototype.checkCollisionWithObjects=function(t,e){var n,o;void 0===e&&(e=!0);var i=[];try{for(var a=r(this.objects),u=a.next();!u.done;u=a.next()){var c=u.value;e&&c.isPassable||c.collides(t)&&i.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i},t}();e.GameWorld=u},6947:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Inventory=e.ITEM_SCALE_FACTOR=e.INVENTORY_SIZE=void 0;var o=n(909),i=n(2267),a=n(9133),u=r(n(9718)),c=r(n(6063));e.INVENTORY_SIZE=9,e.ITEM_SCALE_FACTOR=.875;var s=68/64;(0,i.loadTexture)(u.default),(0,i.loadTexture)(c.default);var l=function(){function t(){this.items=new Array(e.INVENTORY_SIZE),this.selectedItem=0}return t.prototype.itemsCount=function(){return this.items.filter((function(t){return void 0!==t})).length},t.prototype.pickItem=function(t){for(var n=0;n<e.INVENTORY_SIZE;++n)if(void 0===this.items[n])return this.items[n]=t,!0;return!1},t.prototype.useSelectedItem=function(t){var e=this.items[this.selectedItem];void 0!==e&&(this.items[this.selectedItem]=e.useItem(t))},t.prototype.dropSelectedItem=function(t){var e=this.items[this.selectedItem];void 0!==e&&(t.placeObject(new a.DroppedItem(e,t.player.coordinates)),this.items[this.selectedItem]=void 0)},t.prototype.draw=function(t,n,r){var a;(0,i.drawTexture)(u.default,t,n,new o.Coordinates(r.x*e.INVENTORY_SIZE,r.y));var l=new o.Coordinates(n.x-(e.INVENTORY_SIZE-1)/2*r.x,n.y);(0,i.drawTexture)(c.default,t,new o.Coordinates(l.x+this.selectedItem*r.x,l.y),new o.Coordinates(r.x*s,r.y*s));for(var f=0;f<e.INVENTORY_SIZE;++f)null===(a=this.items[f])||void 0===a||a.draw(t,new o.Coordinates(l.x+f*r.x,l.y),new o.Coordinates(r.x*e.ITEM_SCALE_FACTOR,r.y*e.ITEM_SCALE_FACTOR))},t}();e.Inventory=l},4463:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0;var i=n(2267),a=n(1184),u=n(909),c=n(6947),s=o(n(5724));(0,i.loadTexture)(s.default);var l=function(){function t(){this.isPassable=!0,this.coordinates=new u.Coordinates(0,0),this.inventory=new c.Inventory,this.maxHealth=10,this.health=10,this.baseDamage=1,this.baseArmor=0,this.equipment=new Array(a.EquipmentType.MAX_VALUE)}return t.prototype.healOn=function(t){if(this.health==this.maxHealth)return!1;var e=this.maxHealth*t;return this.health+=e,this.health=Math.min(this.health,this.maxHealth),!0},t.prototype.equipItem=function(t){var e=this.equipment[t.equipmentType];return this.equipment[t.equipmentType]=t,e},t.prototype.actualDamage=function(){var t,e,n=this.baseDamage;try{for(var o=r(this.equipment),i=o.next();!i.done;i=o.next()){var u=i.value;void 0!==u&&u.equipmentType===a.EquipmentType.SWORD&&(n+=u.equipmentBonus)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n},t.prototype.actualArmor=function(){var t,e,n=this.baseArmor;try{for(var o=r(this.equipment),i=o.next();!i.done;i=o.next()){var u=i.value;void 0!==u&&u.equipmentType===a.EquipmentType.ARMOR&&(n+=u.equipmentBonus)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n},t.prototype.draw=function(t,e,n){(0,i.drawTexture)(s.default,t,e,n)},t.prototype.collides=function(t){return t.equals(this.coordinates)},t}();e.Player=l},5588:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTrigger=void 0,e.isTrigger=function(t){return"onStep"in t}},5989:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Wall=void 0;var o=n(2267),i=n(909),a=r(n(8817));(0,o.loadTexture)(a.default);var u=function(){function t(){this.isPassable=!1,this.coordinates=new i.Coordinates(0,0),this.matrix=[]}return t.prototype.draw=function(t,e,n){for(var r=0;r<this.matrix.length;++r)for(var u=this.matrix[r],c=0;c<u.length;++c)u[c]&&(0,o.drawTexture)(a.default,t,new i.Coordinates(e.x+n.x*c,e.y+n.y*r-.25*n.y),new i.Coordinates(n.x,1.5*n.y))},t.prototype.collides=function(t){var e=t.y-this.coordinates.y,n=t.x-this.coordinates.x;if(e>=0&&e<this.matrix.length){var r=this.matrix[e];if(n>=0&&n<r.length)return r[n]}return!1},t}();e.Wall=u},4808:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.BoxedWorldGenerator=void 0;var c=n(3775),s=n(909),l=n(9133),f=n(1183),d=n(7252),h=n(7969),p=n(5989),v=function(t,e){this.coordinates=t,this.objects=e},y=function(){function t(t,e,n,r){this.maxDepth=t,this.maxItemsInRoom=e,this.boxSize=n,this.itemGenerator=r}return t.prototype.generate=function(t){return r(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(o){switch(o.label){case 0:return[4,this.generateBoxes(t)];case 1:return e=i.apply(void 0,[o.sent(),2]),n=e[0],r=e[1],[2,this.buildWorld(n,r)]}}))}))},t.prototype.buildWorld=function(t,e){var n,r,o,c,l,f,v,y,x=this,w=new s.Coordinates(Math.min.apply(Math,a([],i(t.map((function(t){return t.coordinates.x}))),!1)),Math.min.apply(Math,a([],i(t.map((function(t){return t.coordinates.y}))),!1))),b=new s.Coordinates(Math.max.apply(Math,a([],i(t.map((function(t){return t.coordinates.x}))),!1))-w.x+1,Math.max.apply(Math,a([],i(t.map((function(t){return t.coordinates.y}))),!1))-w.y+1),g=new p.Wall;g.coordinates=new s.Coordinates(w.x*(this.boxSize.x+1),w.y*(this.boxSize.y+1)),g.matrix=(0,d.range)(b.y*(this.boxSize.y+1)+1).map((function(t){return(0,d.range)(b.x*(x.boxSize.x+1)+1).map((function(t){return!1}))}));try{for(var _=u(t),S=_.next();!S.done;S=_.next()){for(var E=((R=S.value).coordinates.x-w.x)*(this.boxSize.x+1),T=(R.coordinates.y-w.y)*(this.boxSize.y+1),O=0;O<=this.boxSize.x+1;++O)g.matrix[T][E+O]=!0,g.matrix[T+this.boxSize.y+1][E+O]=!0;for(var I=0;I<=this.boxSize.y+1;++I)g.matrix[T+I][E]=!0,g.matrix[T+I][E+this.boxSize.x+1]=!0}}catch(t){n={error:t}}finally{try{S&&!S.done&&(r=_.return)&&r.call(_)}finally{if(n)throw n.error}}var M=function(t){var n,r,o=t.coordinates,i=[new s.Coordinates(o.x+1,o.y),new s.Coordinates(o.x,o.y+1)].filter((function(t){return e.has(m(o,t))}));try{for(var a=(n=void 0,u(i)),c=a.next();!c.done;c=a.next()){var l=c.value;if(l.x===o.x){var f=(o.x-w.x)*(C.boxSize.x+1)+~~(C.boxSize.x/2)+1,d=(o.y-w.y+1)*(C.boxSize.y+1);g.matrix[d][f]=!1,C.boxSize.x%2==0&&(g.matrix[d][f-1]=!1)}l.y===o.y&&(f=(o.x-w.x+1)*(C.boxSize.x+1),d=(o.y-w.y)*(C.boxSize.y+1)+~~(C.boxSize.y/2)+1,g.matrix[d][f]=!1,C.boxSize.y%2==0&&(g.matrix[d-1][f]=!1))}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},C=this;try{for(var j=u(t),P=j.next();!P.done;P=j.next())M(R=P.value)}catch(t){o={error:t}}finally{try{P&&!P.done&&(c=j.return)&&c.call(j)}finally{if(o)throw o.error}}var A=new h.GameWorld;A.objects.push(g);try{for(var k=u(t),D=k.next();!D.done;D=k.next()){var R;O=(R=D.value).coordinates.x*(this.boxSize.x+1)+1,I=R.coordinates.y*(this.boxSize.y+1)+1;try{for(var N=(v=void 0,u(R.objects)),q=N.next();!q.done;q=N.next()){var G=q.value;G.coordinates=new s.Coordinates(G.coordinates.x+O,G.coordinates.y+I),A.placeObject(G)}}catch(t){v={error:t}}finally{try{q&&!q.done&&(y=N.return)&&y.call(N)}finally{if(v)throw v.error}}}}catch(t){l={error:t}}finally{try{D&&!D.done&&(f=k.return)&&f.call(k)}finally{if(l)throw l.error}}return A.player.coordinates=new s.Coordinates(1+~~(this.boxSize.x/2),1+~~(this.boxSize.y/2)),A},t.prototype.generateBoxes=function(t){return r(this,void 0,void 0,(function(){var e,n,a,h,p,y,x,w,b,g,_,S,E,T,O,I,M,C,j,P,A,k,D,R=this;return o(this,(function(N){switch(N.label){case 0:e=new Set,n=[],a=[new s.Coordinates(0,0)],h=new Map,p=[[0,0]],y=new Set,h.set(new s.Coordinates(0,0).toString(),0),y.add(0),x=t.uniformInt(0,4),console.log(x()),w=1,N.label=1;case 1:return p.length>0?(b=i(p.pop(),2),g=b[0],_=b[1],y.has(g)?(y.delete(g),S=a[g],E=t.integer(0,this.maxItemsInRoom),[4,Promise.all((0,f.sample)(E,(0,d.range)(this.boxSize.x).flatMap((function(t){return(0,d.range)(R.boxSize.y).map((function(e){return new s.Coordinates(t,e)}))})),t).map((function(e){return r(R,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=l.DroppedItem.bind,[4,this.itemGenerator.generate(t)];case 1:return[2,new(n.apply(l.DroppedItem,[void 0,r.sent(),e]))]}}))}))})))]):[3,1]):[3,4];case 2:if(T=N.sent(),n[g]=new v(S,T),_<this.maxDepth){O=x(),I=(0,f.sample)(O,[new s.Coordinates(S.x-1,S.y),new s.Coordinates(S.x+1,S.y),new s.Coordinates(S.x,S.y-1),new s.Coordinates(S.x,S.y+1)],t);try{for(k=void 0,M=u(I),C=M.next();!C.done;C=M.next())j=C.value,e.add(m(S,j)),P=j.toString(),h.has(P)||(A=w++,a[A]=j,h.set(P,A),y.add(A),p.unshift([A,_+1]))}catch(t){k={error:t}}finally{try{C&&!C.done&&(D=M.return)&&D.call(M)}finally{if(k)throw k.error}}}return[4,(0,c.delayPromise)()];case 3:return N.sent(),[3,1];case 4:return[2,[n,e]]}}))}))},t}();e.BoxedWorldGenerator=y;var m=function(t,e){var n,r=t.toString(),o=e.toString();return r>o&&(r=(n=i([o,r],2))[0],o=n[1]),"".concat(r,":").concat(o)}},7945:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.FileWorldGenerator=void 0;var u=n(398),c=n(909),s=n(9133),l=n(9122),f=n(7969),d=n(5989);e.FileWorldGenerator=function(){function t(t){this.objects=[],this.playerPosition=new c.Coordinates(0,0),this.parseFile(t)}return t.prototype.generate=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){return(t=new f.GameWorld).player.coordinates=this.playerPosition,this.objects.forEach((function(e){return t.placeObject(e)})),t.objects.push(this.wall),[2,t]}))}))},t.prototype.parseFile=function(t){var e,n=(e=i(this.parseWalls(t),2))[0],r=e[1];this.parseHoleFillers(r,n)},t.prototype.parseWalls=function(e){var n,r,o,a=(n=i(t.parseToken(e),2))[0],u=n[1],s=(r=i(a.split(t.WHITESPACE).map((function(t){return+t})),2))[0],l=r[1];if(void 0===s||void 0===l)throw new Error("first line must contain width and height");this.wall=new d.Wall;for(var f=u,h=[],p=0;p<l;++p){var v=(o=i(t.parseToken(f),2))[0];f=o[1];var y=v.split(t.WHITESPACE);if(y.length!==s)throw new Error("amount of values on line ".concat(p," isn't match width ").concat(s));for(var m=[],x=0;x<y.length;x++)"W"!==y[x]?(m.push(!1),"."!==y[x]&&(h[+y[x]]=new c.Coordinates(x,p))):m.push(!0);this.wall.matrix.push(m)}return[h,f]},t.prototype.parseHoleFillers=function(t,e){var n,r,o=t.split("\n").map((function(t){return t.trim()}));try{for(var i=a(o),u=i.next();!u.done;u=i.next()){var c=u.value;this.parseHoleFiller(c,e)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.parseHoleFiller=function(e,n){var r,o,a=(r=i(t.parseToken(e,"."),2))[0],u=r[1];if(""!==a){var c=+a,l=n[c];if(void 0===l)throw new Error("hole ".concat(c," is not on field"));var f=(o=i(t.parseToken(u.trimStart(),t.WHITESPACE),2))[0],d=o[1];switch(f){case"Player":this.playerPosition=l;break;case"Item":this.objects.push(new s.DroppedItem(t.parseItem(d),l));break;default:console.warn('Ignore unknown hole filler "'.concat(f,'"'))}}},t.parseItem=function(t){switch(t){case"Sword":return new l.Sword;case"GoldenApple":return new u.GoldenApple;default:throw new Error('unknown item "'.concat(t,'"'))}},t.parseToken=function(t,e){var n,r;void 0===e&&(e="\n");var o="string"==typeof e?t.indexOf(e):null!==(r=null===(n=t.match(e))||void 0===n?void 0:n.index)&&void 0!==r?r:-1;return-1===o?[t.trim(),""]:[t.substring(0,o).trim(),t.substring(o+1)]},t.loadFile=function(e){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return[4,fetch(e)];case 1:return n=o.sent(),r=t.bind,[4,n.text()];case 2:return[2,new(r.apply(t,[void 0,o.sent()]))]}}))}))},t.WHITESPACE=/\s+/,t}()},8083:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.constGenerator=void 0,e.constGenerator=function(t){return{generate:function(){return n(void 0,void 0,void 0,(function(){return r(this,(function(e){return[2,t()]}))}))}}}},1685:function(t,e){"use strict";var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.UniformItemGenerator=void 0;var i=function(){function t(t){this.items=r([],n(t),!1),this.sumProbability=t.map((function(t){var e=n(t,2);return e[0],e[1]})).reduce((function(t,e){return t+e}),0)}return t.prototype.generate=function(t){var e,r,i=t.uniform(0,this.sumProbability)();try{for(var a=o(this.items),u=a.next();!u.done;u=a.next()){var c=n(u.value,2),s=c[0],l=c[1];if(i<l)return s.generate(t);i-=l}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}throw new Error("unreachable")},t}();e.UniformItemGenerator=i},9003:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractEquipment=void 0;var i=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.equipmentType=n,o.equipmentBonus=r,o}return o(e,t),e.prototype.useItem=function(t){return t.player.equipItem(this)},e}(n(5250).TexturedItem);e.AbstractEquipment=i},1184:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.EquipmentType=void 0,(n=e.EquipmentType||(e.EquipmentType={}))[n.SWORD=0]="SWORD",n[n.ARMOR=1]="ARMOR",n[n.MAX_VALUE=2]="MAX_VALUE"},398:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.GoldenApple=void 0;var a=n(2267),u=n(5250),c=i(n(168));(0,a.loadTexture)(c.default);var s=function(t){function e(){return t.call(this,c.default)||this}return o(e,t),e.prototype.useItem=function(t){if(!t.player.healOn(.2))return this},e}(u.TexturedItem);e.GoldenApple=s},9122:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Sword=void 0;var a=n(2267),u=n(9003),c=n(1184),s=i(n(4365));(0,a.loadTexture)(s.default);var l=function(t){function e(){return t.call(this,s.default,c.EquipmentType.SWORD,5)||this}return o(e,t),e}(u.AbstractEquipment);e.Sword=l},5250:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TexturedItem=void 0;var r=n(2267),o=function(){function t(t){this.texture=t}return t.prototype.draw=function(t,e,n){(0,r.drawTexture)(this.texture,t,e,n)},t}();e.TexturedItem=o},909:function(t,e){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MutableCoordinates=e.Coordinates=void 0;var o=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.norm=function(){var e=this.length();return new t(this.x/e,this.y/e)},t.prototype.equals=function(t){return this.x===t.x&&this.y==t.y},t.prototype.toString=function(){return"(".concat(this.x,", ").concat(this.y,")")},t}();e.Coordinates=o;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(o);e.MutableCoordinates=i},3775:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delayPromise=void 0,e.delayPromise=function(t){return void 0===t&&(t=0),new Promise((function(e){return setTimeout(e,t)}))}},3380:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.measureText=e.drawText=e.DEFAULT_LINE_GAP=e.EMOJI_FONT_FAMILY=e.DEFAULT_FONT_FAMILY=void 0;var a=n(909);e.DEFAULT_FONT_FAMILY="Roboto, sans-serif",e.EMOJI_FONT_FAMILY='Roboto, "Noto Colr Emoji Glyf", sans-serif',e.DEFAULT_LINE_GAP=5,e.drawText=function(t,n,a,u,c){var s,l,f=void 0===c?{}:c,d=f.lineGap,h=void 0===d?e.DEFAULT_LINE_GAP:d,p=f.centerWidth,v=void 0!==p&&p,y=f.centerHeight,m=void 0!==y&&y,x=n.split("\n"),w=Math.max.apply(Math,o([],r(x.map((function(e){return t.measureText(e)})).map((function(t){return t.actualBoundingBoxAscent+t.actualBoundingBoxDescent}))),!1));m&&(u-=((w+h)*x.length-h)/2);try{for(var b=i(x),g=b.next();!g.done;g=b.next()){var _=g.value,S=t.measureText(_);u+=w-S.actualBoundingBoxDescent,v?t.fillText(_,a-S.width/2,u):t.fillText(_,a,u),u+=S.actualBoundingBoxDescent+h}}catch(t){s={error:t}}finally{try{g&&!g.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}},e.measureText=function(t,n,i){var u=(void 0===i?{}:i).lineGap,c=void 0===u?e.DEFAULT_LINE_GAP:u,s=n.split("\n").map((function(e){return t.measureText(e)})),l=Math.max.apply(Math,o([],r(s.map((function(t){return t.actualBoundingBoxAscent+t.actualBoundingBoxDescent}))),!1)),f=Math.max.apply(Math,o([],r(s.map((function(t){return t.width}))),!1)),d=(l+c)*s.length-c;return new a.Coordinates(f,d)}},2267:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawTexture=e.loadTexture=void 0;var n=new Map;e.loadTexture=function(t){var e=new Image;e.src=t,n.set(t,e)},e.drawTexture=function(t,e,r,o){n.has(t)?e.drawImage(n.get(t),r.x-o.x/2,r.y-o.y/2,o.x,o.y):console.error("Texture not loaded",t)}},7252:function(t,e){"use strict";var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.range=void 0,e.range=function(t){return r([],n(new Array(t).keys()),!1)}},422:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.seededRandom=void 0;var r=n(5908);e.seededRandom=function(t){return new r.Random((0,r.RNGFactory)(t))}},1183:function(t,e){"use strict";var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.sample=e.shuffle=e.shuffleInplace=void 0,e.shuffleInplace=function(t,e){for(var r,o=t.length;--o>0;){var i=e.integer(0,o);r=n([t[o],t[i]],2),t[i]=r[0],t[o]=r[1]}return t},e.shuffle=function(t,o){return(0,e.shuffleInplace)(r([],n(t),!1),o)},e.sample=function(t,n,r){return(0,e.shuffle)(n,r).slice(0,t)}},7785:(t,e,n)=>{"use strict";t.exports=n.p+"334d47fbf4d912b5c373.png"},9718:(t,e,n)=>{"use strict";t.exports=n.p+"4182604c2cd966f8e8f4.png"},6063:(t,e,n)=>{"use strict";t.exports=n.p+"61987ff5e2201c61bbdf.png"},5724:(t,e,n)=>{"use strict";t.exports=n.p+"30cb114f6a524d2a0ab3.png"},8817:(t,e,n)=>{"use strict";t.exports=n.p+"63b2e2c9fd7f9a7d185a.png"},168:(t,e,n)=>{"use strict";t.exports=n.p+"7abebf054a41bcf79af3.png"},4365:(t,e,n)=>{"use strict";t.exports=n.p+"6446a54eccc014a9f2f1.png"},6315:(t,e,n)=>{"use strict";t.exports=n.p+"1d9d91a0b50951266e7d.world"},5042:()=>{},5908:(t,e,n)=>{"use strict";n.r(e),n.d(e,{RNG:()=>c,RNGFactory:()=>l,Random:()=>w,default:()=>b});var r=n(6377);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,"symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key))?o:String(o)),r)}var o}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}var c=function(){function t(){}return t.prototype._seed=function(t,e){if(t===(t||0))return t;for(var n=""+t,r=0,o=0;o<n.length;++o)r^=0|n.charCodeAt(o);return r},t}(),s=function(t){function e(e,n){var r;return(r=t.call(this)||this)._rng=void 0,r.seed(e,n),r}a(e,t);var n=e.prototype;return n.next=function(){return this._rng()},n.seed=function(t,e){this._rng=t},n.clone=function(t,n){return new e(this._rng,n)},i(e,[{key:"name",get:function(){return"function"}}]),e}(c),l=function(){var t=[].slice.call(arguments),e=t[0],n=void 0===e?"default":e;switch(typeof n){case"object":if(n instanceof c)return n;break;case"function":return new s(n);default:return new s(r.apply(void 0,t))}throw new Error('invalid RNG "'+n+'"')},f=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),function(){return t.next()*(n-e)+e}};function d(t){return new h(t)}var h=function(t){var e=this;this.n=void 0,this.isInt=function(){if(Number.isInteger(e.n))return e;throw new Error("Expected number to be an integer, got "+e.n)},this.isPositive=function(){if(e.n>0)return e;throw new Error("Expected number to be positive, got "+e.n)},this.lessThan=function(t){if(e.n<t)return e;throw new Error("Expected number to be less than "+t+", got "+e.n)},this.greaterThanOrEqual=function(t){if(e.n>=t)return e;throw new Error("Expected number to be greater than or equal to "+t+", got "+e.n)},this.greaterThan=function(t){if(e.n>t)return e;throw new Error("Expected number to be greater than "+t+", got "+e.n)},this.n=t},p=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),void 0===n&&(n=void 0===e?1:e,e=0),d(e).isInt(),d(n).isInt(),function(){return Math.floor(t.next()*(n-e+1)+e)}},v=function(t){return function(){return t.next()>=.5}},y=[0,0,.6931471805599453,1.791759469228055,3.1780538303479458,4.787491742782046,6.579251212010101,8.525161361065415,10.60460290274525,12.801827480081469],m=function(t){return y[t]},x=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.next=function(){return Math.random()},n.seed=function(t,e){},n.clone=function(){return new e},i(e,[{key:"name",get:function(){return"default"}}]),e}(c),w=function(){function t(t){var e=this;this._rng=void 0,this._patch=void 0,this._cache={},this.next=function(){return e._rng.next()},this.float=function(t,n){return e.uniform(t,n)()},this.int=function(t,n){return e.uniformInt(t,n)()},this.integer=function(t,n){return e.uniformInt(t,n)()},this.bool=function(){return e.uniformBoolean()()},this.boolean=function(){return e.uniformBoolean()()},this.uniform=function(t,n){return e._memoize("uniform",f,t,n)},this.uniformInt=function(t,n){return e._memoize("uniformInt",p,t,n)},this.uniformBoolean=function(){return e._memoize("uniformBoolean",v)},this.normal=function(t,n){return function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),function(){var r,o,i;do{i=(r=2*t.next()-1)*r+(o=2*t.next()-1)*o}while(!i||i>1);return e+n*o*Math.sqrt(-2*Math.log(i)/i)}}(e,t,n)},this.logNormal=function(t,n){return function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1);var r=t.normal(e,n);return function(){return Math.exp(r())}}(e,t,n)},this.bernoulli=function(t){return function(t,e){return void 0===e&&(e=.5),d(e).greaterThanOrEqual(0).lessThan(1),function(){return Math.floor(t.next()+e)}}(e,t)},this.binomial=function(t,n){return function(t,e,n){return void 0===e&&(e=1),void 0===n&&(n=.5),d(e).isInt().isPositive(),d(n).greaterThanOrEqual(0).lessThan(1),function(){for(var r=0,o=0;r++<e;)t.next()<n&&o++;return o}}(e,t,n)},this.geometric=function(t){return function(t,e){void 0===e&&(e=.5),d(e).greaterThan(0).lessThan(1);var n=1/Math.log(1-e);return function(){return Math.floor(1+Math.log(t.next())*n)}}(e,t)},this.poisson=function(t){return function(t,e){if(void 0===e&&(e=1),d(e).isPositive(),e<10){var n=Math.exp(-e);return function(){for(var r=n,o=0,i=t.next();i>r;)i-=r,r=e*r/++o;return o}}var r=Math.sqrt(e),o=.931+2.53*r,i=.02483*o-.059,a=1.1239+1.1328/(o-3.4),u=.9277-3.6224/(o-2);return function(){for(;;){var n=void 0,c=t.next();if(c<=.86*u)return n=c/u-.43,Math.floor((2*i/(.5-Math.abs(n))+o)*n+e+.445);c>=u?n=t.next()-.5:(n=((n=c/u-.93)<0?-.5:.5)-n,c=t.next()*u);var s=.5-Math.abs(n);if(!(s<.013&&c>s)){var l=Math.floor((2*i/s+o)*n+e+.445);if(c=c*a/(i/(s*s)+o),l>=10){var f=(l+.5)*Math.log(e/l)-e-.9189385332046727+l-(1/12-(1/360-1/(1260*l*l))/(l*l))/l;if(Math.log(c*r)<=f)return l}else if(l>=0){var d,h=null!=(d=m(l))?d:0;if(Math.log(c)<=l*Math.log(e)-e-h)return l}}}}}(e,t)},this.exponential=function(t){return function(t,e){return void 0===e&&(e=1),d(e).isPositive(),function(){return-Math.log(1-t.next())/e}}(e,t)},this.irwinHall=function(t){return function(t,e){return void 0===e&&(e=1),d(e).isInt().greaterThanOrEqual(0),function(){for(var n=0,r=0;r<e;++r)n+=t.next();return n}}(e,t)},this.bates=function(t){return function(t,e){void 0===e&&(e=1),d(e).isInt().isPositive();var n=t.irwinHall(e);return function(){return n()/e}}(e,t)},this.pareto=function(t){return function(t,e){void 0===e&&(e=1),d(e).greaterThanOrEqual(0);var n=1/e;return function(){return 1/Math.pow(1-t.next(),n)}}(e,t)},t&&t instanceof c?this.use(t):this.use(new x),this._cache={}}var e=t.prototype;return e.clone=function(){var e=[].slice.call(arguments);return e.length?new t(l.apply(void 0,e)):new t(this.rng.clone())},e.use=function(){this._rng=l.apply(void 0,[].slice.call(arguments))},e.patch=function(){if(this._patch)throw new Error("Math.random already patched");this._patch=Math.random,Math.random=this.uniform()},e.unpatch=function(){this._patch&&(Math.random=this._patch,delete this._patch)},e.choice=function(t){if(!Array.isArray(t))throw new Error("Random.choice expected input to be an array, got "+typeof t);var e=null==t?void 0:t.length;return e>0?t[this.uniformInt(0,e-1)()]:void 0},e._memoize=function(t,e){var n=[].slice.call(arguments,2),r=""+n.join(";"),o=this._cache[t];return void 0!==o&&o.key===r||(o={key:r,distribution:e.apply(void 0,[this].concat(n))},this._cache[t]=o),o.distribution},i(t,[{key:"rng",get:function(){return this._rng}}]),t}(),b=new w}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&!t;)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.nc=void 0,(()=>{"use strict";var t=n(4569),e=n(118),r=n(4993),o=n(4345),i=n(2417),a=n(6301),u=n(1716),c=n(1811);n(8548);var s=document.getElementById("canvas");if(s instanceof HTMLCanvasElement){s.tabIndex=1e3,s.focus();var l={state:"mainMenu",canvas:s,context:s.getContext("2d"),previousUpdateTime:performance.now()},f=(0,c.EventBus)(l,e.CanvasClearEventHandler,t.InitEventHandler,u.MainMenuEventHandler,r.GameWorldEventHandler,(0,i.GameInterfaceEventHandler)(),(0,a.DebugInfoEventHandler)(),o.ChangePreviousUpdateTimeEventHandler);window.onload=function(t){f({type:"load",event:t}),setInterval((function(){f({type:"tick"})}),1e3/60)},window.onresize=function(t){f({type:"resize",event:t})},s.onkeydown=function(t){f({type:"keyDown",event:t})},s.onclick=function(t){f({type:"click",event:t})}}})()})();